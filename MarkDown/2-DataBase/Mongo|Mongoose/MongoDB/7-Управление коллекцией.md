- [Управление коллекцией](#управление-коллекцией)
  - [***Явное управление коллекцией:***](#явное-управление-коллекцией)
  - [***Ограничение коллекции:***](#ограничение-коллекции)
  - [***Подколлекции:***](#подколлекции)

## Управление коллекцией

### ***Явное управление коллекцией:***

Коллекция может создавать неявно с помощью `save()` при добавлени первых данных.

Но можно сделать явное добавление таблицы с помощью `createCollection(name, options)`:

* `name` - название коллекции.
* `options` - доп. параметры.

```javascript
db.createCollection("trading")
// { "ok" : 1 }
```

### ***Ограничение коллекции:***

При запросе к БД на выборку, Mongo возвращает документы ровно в том порядке, в котором они были добавлены в коллекцию. Вот только при **удалении/перемещении/изменении** такой порядок **не** гарантируется.

Ограниченная коллекция **гарантирует**, что документы будут распологаться ровно в том порядке, в котором были добавлены в коллекцию. Ограниченные коллекции имеют фиксированный размер и когда в коллекции нет места - наимболее старые документы **удаляются** и в конец **добавляются** новые данные:

```javascript 
// Размер 9500 байт
db.createCollection("investing", {capped: true, size: 9500})
// { "ok" : 1 }
```

Также можно указать максимальное кол-во документов в коллекции, указав в его в параметре `max`:

```javascript
// Для инвестирования доступно максимум 13 активов
db.createCollection("investing", {capped: true, size: 9500, max: 130})
// { "ok" : 1 }
```

**Однако**, если размер коллекции закончится до того, как коллекция будет заполнена `130` документами - то последние документы будут удаляться.

**Запрещено** удалять документы из такой коллекции, можно удалить лишь всю коллекцию целиком!

### ***Подколлекции:***

Для упрощения организации данных можно использовать подколлекции.

К примеру данные по коллекции `deposit` нужно на инвестирование и трейдинг, для этого можно создать коллекции:

* `db.deposit.investing`
* `db.deposit.trading` 

При этом эти две подколлекции никак не связаны с `deposit`, т.е. это три разные коллекции.


