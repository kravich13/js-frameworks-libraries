# Основы React Native

- [Основы React Native](#основы-react-native)
  - [Установка и запуск](#установка-и-запуск)
    - [Установка](#установка)
    - [Запуск приложения](#запуск-приложения)
    - [Запуск на Android](#запуск-на-android)
  - [Верстка](#верстка)
    - [Компоненты для верстки](#компоненты-для-верстки)
    - [Стилизация](#стилизация)
  - [Ивенты](#ивенты)

## Установка и запуск

Для того, чтобы работать с React Native - нужен установленный Expo, на котором можно эмулировать работу Android и IOS. 

Если есть только линукс или винда, то эмулятор можно запустить только на Android. Если есть айфон - то можно транслировать проект на нём. 

### Установка


Устанавливаем Expo:

```bash
sudo npm install --global expo-cli
```

Устанавливаем сам проект в конкретную папку:

```
expo init my-project
```

Появляется такое окно с выбором:

![](img/photo_2021-12-23_12-33-16.jpg)

Можно выбрать либо: 
1. Без TypeScript
2. С TypeScript
3. Для навигации с Typescript
4. Самая минимальная конфигурация

### Запуск приложения

После установки будут доступны различные вариации запуска проекта:

![](img/photo_2021-12-23_12-41-09.jpg)

При запуске `npm start` предложит перейти на `localhost:19002`, переходим и видим следующее:

![](img/photo_2021-12-23_12-48-29.jpg)

Можно запустить проект как:
* эмулятор на Android
* эмулятор IOS

С помощью кьюар кода можно запустить приложение на телефоне с прогой `expo go`. 

### Запуск на Android

Для установки Android эмулятора скачиваем android studio.

Переходим в `more options`, выбираем в `AVD manager`. Создаём устройство, которое помечено галочкой play market и выбираем. 
Запуск эмулятора происходит через кнопку `play` (зеленая).

Затем во вкладке локалхоста нажимаем Run on Android device/emulator и эмулятор андроида успешно запускается. 
***

## Верстка

### Компоненты для верстки

Самое главное отличие React Native от React в том, что здесь нет `HTML` тегов, здесь есть специальные функции обёртки, которые генерируют код под android и ios. 

Список модулей, используемых для генерации элементов: 


* `View` - аналог `<div>`, есть закрывающий тег
* `ScrollView` - есть закрывающий тег. Позволяет прокручивать контент, если он вылазит за высоту окна
* `Text` - аналог `<p>`, есть закрывающий тег
* `TextInput` - аналог `<input>`, нет закрывающего тега

  Новые атрибуты: 
  * `onChangeText` - возвращает введенный текст
  * `autoCorrect` - по дефолту включён T9 (`true`), `false` чтобы выключить
  * `autoCapitalize` - по дефолту большая первая буква в предложении, `none` - выключить

* `Button` - аналог `<button>`, нет закрывающего тега
 
  Новые атрибуты: 
  * `title` - принимает текст кнопки
  * `onPress` - ивент клика

* `Image` - аналог `image`, нет закрывающего тега. 

  Новые атрибуты: 
  * `source` - принимает путь до картинки или саму картинку

* `FlatList` - создан специально для списков чего-то, где много элементов. Позволяет не отрисовывать все его элементы сразу, а отрисовывает лишь те из них, которые доступны по высоте экрана. Что не влазит - просто держит в памяти

  Новые атрибуты: 
  * `data` - принимает входящий стейт
  * `renderItem` - возвращает callback с собственными полями и в нём же нужно вернуть элемент на один объект стейта (как обычный `.map`)
  
  * `keyExtractor` - как `key`, только возвращает callback с собственными полями и здесь нужно вернуть поля с `id`. 

    Пример: 
    ```jsx
    <FlatList
      data={todos}
      renderItem={({ item }) => {
        return <Todo todo={item} />;
      }}
      keyExtractor={(item) => item.id}
    />
    ```

### Стилизация

В обычном React есть объект `styles`, в который записываются свойства полей. В React-Native юзается почти то же самое:

```jsx
export default function App() {
  return (
    <View style={styles.container}>
      <Text style={styles.text}>Maxim is god</Text>
      <StatusBar style="auto" />
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: 'rgb(1,73,73)',
    alignItems: 'center',
    justifyContent: 'center',
  },
  text: {
    color: 'white'
  }
});
```

Расположение компонентов по дефолту реализовано на `flex`, здесь нет никаких `displayBlock`. Чтобы установить `flex` - нужно юзать `1`. 

Также можно указывать стили напрямую в атрибуте `style`, но подсказок уже не будет. 

Стандартные стили для `border` задаются так:

```js
input: {
  borderWidth: 1,
  borderStyle: 'solid',
  borderColor: 'black',
},
```
***

## Ивенты

Для того, чтобы добавить ивенты на обычные элементы - их нужно оборачивать в специальные компоненты Native. 

Один из таких - `TouchableOpacity`. 

```js
import React from 'react';
import { StyleSheet, Text, TouchableOpacity, View } from 'react-native';

export const Item = ({ item, removeItem }) => {
  return (
    <TouchableOpacity activeOpacity={0.5} onLongPress={() => removeItem(item.id)}>
      <View style={styles.item}>
        <Text style={styles.title}>{item.title}</Text>
      </View>
    </TouchableOpacity>
  );
};
```