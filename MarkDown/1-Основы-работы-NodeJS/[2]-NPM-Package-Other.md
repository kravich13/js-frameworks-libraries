- [Основное](#основное)
  - [NPM](#npm)
  - [Package.json](#packagejson)
  - [devDependencies](#devdependencies)
  - [Удаление пакетов](#удаление-пакетов)
  - [Команды npm](#команды-npm)

# Основное

## NPM

Для автоматизации установки и обновления пакетов, как правило, применяются систему управления пакетами или менеджеры. Непосредственно в `Node.js` для этой цели используется пакетный менеджер `NPM` (Node Package Manager). `NPM` по умолчанию устанавливается вместе с `Node.js`, поэтому ничего доустанавливать не требуется.

`NPM` важен в том плане, что с его помощью легко управлять пакетами. 
***

## Package.json

Для удобного управления конфигурацией и пакетами приложения в `npm` применяется файл конфигурации `package.json`.

Для его создания в папке с проектом нужно открыть терминал и ввести команду `npm init`, которая будет спрашивать данные для полей типа `name`, `version` и т.д.

Чтобы пропустить этап запросов - нужно нажимать `enter` до момента создания `package.json`.

Его содержимое:

```json
{
  "name": "modulesapp",
  "version": "1.0.0",
  "main": "index.js",
  "dependencies": {
    "express": "^4.17.1"
  },
  "devDependencies": {},
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",
  "license": "ISC",
  "description": ""
}
```

Информация обо всех добавляемых пакетах, которые используются при работе приложения, добавляются в секцию `dependencies`.

Пример подключения и использования модуля `express`:

1. Установка в корневой папке - `npm i express`, появится папка `node_modules` в которой хранятся все установленные модули.
2. Подключение модуля в `app.js`:

    ```javascript
    // Получение модуля express
    const express = require("express")

    // Создание приложения
    const app = express()

    // Установка обработчика для пути /
    app.get("/", function (request, response) {
        response.end("Hello, module Express")
    })

    // Прослушивание по порту 
    app.listen(3000)
    ```
***

Добавление множества пакетов

Файл `package.json` играет большую роль и может облегчить работу с пакетами в различных ситуациях. Например, мы планируем использовать множество пакетов. Но вводить для установки каждого пакета в консоли соответствующую команду не очнь удобно. В этом случае мы можем определить все пакеты в файле `package.json` и потом одной командой их установить.

Например, изменим файл `package.json` следующим образом:

```json
{
  "name": "modulesapp",
  "version": "1.0.0",
  "dependencies": {
    "express": "^4.17.1",
    "react": "^16.9.0",
    "react-dom": "^16.9.0"
  }
}
```
Здесь добавлены два пакета, которые представляют библиотеку `React`.

Затем, для загрузки всех пакетов нужно выполнить команду:

```
npm i
```

Эта команда возьмет определение всех пакетов из секций `dependencies` и загрузит их в проект. Если пакет с нужной версией уже есть проекте, как в данном случае `express`, то по новой он не загружается.
***

## devDependencies

Кроме пакетов, которые применяются в приложении, когда оно запущено и находится в рабочем состоянии (такие как `express`), есть ещё пакеты, которые применяются при разработке приложения и его тестировании. Такие пакеты добавляются в другую секцию - `devDependencies`.

Флаг `--save dev` в терминале указывается, что информацию о пакете следует сохранить в секции `devDependencies` файла `package.json`.

```json
{
  "name": "modulesapp",
  "version": "1.0.0",
  "dependencies": {
    "express": "^4.17.1",
    "react": "^16.9.0",
    "react-dom": "^16.9.0"
  },
  "devDependencies": {
    "jasmine-node": "^3.0.0"
  }
}
```
***

## Удаление пакетов

Для удаления пакетов используется команда `npm uninstall пакет`.

При этом неважно расположение информации о пакете, в секции `dependencies` или `devDependencies`, пакет удаляется из любой из этих секций.

Если нужно удалить несколько пакетов - можно удалить их определение в файле `package.json` и ввести команду `npm i`, после чего удаленные из `package.json` пакеты также будут удалены из папки `node_modules`.
***

## Команды npm

`NPM` позволяет определять в файле `package.json` команды, которые выполняют определенные действия. Например, определим следующий файл `app.js`:

```javascript
let name = process.argv[2]
let age = process.argv[3]
 
console.log("name: " + name)
console.log("age: " + age)
```

В данном случае получаем переданные параметры при запуске приложения.

Определим файл `package.json`:

```json
{
  "name": "modulesapp",
  "version": "1.0.0",
  "scripts" : {
    "start" : "node app.js",
    "dev" : "node app.js Vladislav 23"
  }
}
```

Здесь добавлена секция `scripts`, которая определяет две команды. 

1. Команда `start` - выполняет команду `node app.js`, которая выполняет код в этом же файле.
2. Команда `dev` - выполняет тот же файл, но при этом передаёт ему два параметра.

Названия команд могут быть произвольными. Но здесь надо учитывать один момент. Есть условно говоря зарезервированные названия для команд: `start`, `test`, `run` и ряд других. Их не очень много. И как раз первая команда из выше определенного файла `package.json` называется `start`. 

И для выполнения подобных команд в терминале/командной строке надо выполнить команду:

```
npm [название_команды]
```

Для запуска `start`:

```
npm start
```

Команды с другими названиями, такие как `dev`:

```
npm run dev
```