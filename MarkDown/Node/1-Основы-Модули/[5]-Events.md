- [Ивенты](#ивенты)
- [Передача параметров событию](#передача-параметров-событию)
- [Наследование от EventEmitter](#наследование-от-eventemitter)

## Ивенты

Большинство функционала `Node.js` применяет асинхронную событийную архитектуру, которая использует специальные обьъекты - эмиттеры для генерации различных событий, которые обрабатываются специальными функциями - обработчиками или слушателями событий.
Все объекты, которые генерируют события, представляют экземпляры класса `EventEmitter`.


С помощью функции `eventEmitter.on()` к определенному событию по имени цепляется функция обработчика. Причем для одного события можно указать множество обработчиков. Когда объект `EventEmitter` генерирует событие, происходит выполнение всех этих обработчиков.

Пример использования объекта `eventEmitter` и событий:

```javascript
// Модуль events
const Emitter = require("events")

// emitter - вызов класса Emitter
let emitter = new Emitter()
let eventName = "greet"

emitter.on(eventName, function () {
    console.log("Привет всем!")
})

emitter.on(eventName, function () {
    console.log("Привет")
})

emitter.emit(eventName)
```

```bash
# Terminal

Привет всем!
Привет
```

С помощью функции `on()` связываем событие, которое передаётся в качестве первого параметра и с функцией в качестве другого.

Таким образом, один объект `emitter` способен вызывать к себе `on()` для генерации собыитй.

**Для генерации события и вызова связанных с ним обработчиков выполняется функция `emitter.emit()`, в которое передается название события.**
***

## Передача параметров событию 

При вызове события в качестве второго параметра в функцию `emit` можно передавать некоторый объект, который передаётся в функцию обработчика событий: 

```javascript
const Emitter = require("events")

let emitter = new Emitter()
let eventName = "greet"

emitter.on(eventName, function (data) {
    console.log(data)
})
 
// Генерация события greet с параметром Kravich
emitter.emit(eventName, "Kravich")
```
***

## Наследование от EventEmitter

В приложении мы можем оперировать сложными объектами, для которых также можно определять события, но для этого их надо связать с объектом `EventEmitter`.

```javascript
const EventEmitter = require("events")

let eventName = "greet"


// Собственный User наследуется от модуля events
class User extends EventEmitter {
    
    sayHi (data) {

        // Текущий объект генерирует событие greet и показывает текст
        this.emit(eventName, data)
    }
}

// Добавляем к объекту user обработку события "greet"
let user = new User()

// Объект user создаёт событие greet
user.on(eventName, function (data) {
    console.log(data)
})
  
user.sayHi("Мне нужна твоя одежда...")
```

Работает следующим образом: 
1. Создаётся собственный класс, унаследованный все методы от модуля `events (EventEmitter)`.
2. В классе `User` создаётся функция `sayHi` с параметром, в которой текущий объект генерирует событие `eventName`.
3. Создаётся объект `user` с вызовом класса `User`.
4. На объект `user` вешается событие `eventName` с функцией, у которой параметр - `data`.
5. Объект `user` вызывает метод класса `sayHi` и передаёт ему текст. Именно эта строка генерирует событие `eventName`.
